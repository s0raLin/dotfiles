# 配置导入导出功能使用指南

## 功能概述

Linux配置管理器现在支持配置文件的导入和导出功能，可以方便地备份和迁移配置。

## 导出配置

### 使用方法
1. 点击顶部导航栏的"导出配置"按钮
2. 系统会自动生成一个ZIP压缩包并下载到本地
3. 文件名格式：`linux-configs-YYYY-MM-DD.zip`

### 导出内容
- **按分类组织**：配置文件按照前端显示的分类结构组织
  - Shell 配置/
  - 编辑器配置/
  - Git 配置/
  - SSH 配置/
  - 系统配置/
  - 应用配置/
- **配置清单**：包含导出时间、文件总数、分类信息等元数据
- **文件内容**：所有配置文件的完整内容

### 目录结构示例
```
linux-configs-2026-01-31.zip
├── Shell 配置/
│   ├── .bashrc
│   ├── .zshrc
│   └── .profile
├── 编辑器配置/
│   ├── .vimrc
│   └── init.lua
├── Git 配置/
│   ├── .gitconfig
│   └── .gitignore_global
├── SSH 配置/
│   └── config
├── 系统配置/
│   └── hosts
└── 配置清单.json
```

## 导入配置

### 使用方法
1. 点击顶部导航栏的"导入配置"按钮
2. 选择之前导出的ZIP格式配置文件
3. 系统会自动解析并匹配对应的配置文件
4. 显示导入结果（成功/跳过/错误的文件数量）

### 导入规则
- **文件匹配**：根据文件名自动匹配系统中的配置文件
- **内容覆盖**：导入的内容会覆盖现有配置文件内容
- **错误处理**：无法匹配或更新失败的文件会被跳过并记录错误信息
- **格式要求**：只支持ZIP格式的配置文件

### 注意事项
1. **备份重要配置**：导入前建议先导出当前配置作为备份
2. **文件权限**：确保有足够权限修改目标配置文件
3. **格式兼容**：导入的配置文件应该与当前系统兼容
4. **逐步验证**：导入后建议逐个检查重要配置文件

## API接口

### 导出配置
```
GET /api/export
Response: application/zip
```

### 导入配置
```
POST /api/import
Content-Type: multipart/form-data
Body: configFile (ZIP文件)
Response: JSON格式的导入结果
```

## 技术实现

### 后端
- 使用Go的`archive/zip`包处理ZIP文件
- 按分类组织文件结构
- 生成JSON格式的配置清单
- 智能文件名匹配算法

### 前端
- 使用HTML5 File API处理文件选择
- Blob API处理文件下载
- 实时状态反馈（导入中/导出中）
- 错误处理和用户提示

## 故障排除

### 常见问题
1. **导出失败**：检查后端服务是否正常运行
2. **导入失败**：确认文件格式为ZIP且结构正确
3. **文件匹配失败**：检查文件名是否与系统配置文件匹配
4. **权限错误**：确保有足够权限读写配置文件

### 错误代码
- `400`：请求格式错误或文件格式不支持
- `500`：服务器内部错误，通常是文件读写权限问题
- `404`：配置文件不存在或无法访问