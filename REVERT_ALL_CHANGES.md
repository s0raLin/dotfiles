# 撤销所有更改功能增强

## 功能概述

"撤销所有更改"按钮现在可以在任意状态下点击，无论文件当前处于什么状态，都能一键回到最初的原始状态并清除所有撤销/重做历史记录。

## 功能特性

### 1. 无条件可用
- **之前**：只有在文件有修改或有撤销历史时才能点击
- **现在**：在任何状态下都可以点击（除了加载中）

### 2. 完全重置
点击按钮后会执行以下操作：
- 将文件内容重置为原始状态（刚打开文件时的内容）
- 清除所有撤销历史记录 (`undoHistory = []`)
- 清除所有重做历史记录 (`redoHistory = []`)
- 将修改状态设置为 `false`
- 清除该文件在 `fileEditStates` 中的编辑状态

### 3. 键盘快捷键
- **快捷键**：`Ctrl + Shift + R`
- **适用范围**：当编辑器有焦点且没有其他输入元素活跃时

## 使用场景

1. **实验性编辑**：在尝试不同的配置时，可以随时一键回到起始点
2. **错误恢复**：当编辑出现问题时，快速回到安全状态
3. **清理工作区**：清除所有编辑历史，重新开始
4. **状态重置**：无论当前处于什么编辑状态，都能快速重置

## 技术实现

### Action 类型
```typescript
case 'REVERT_CHANGES':
  return {
    ...state,
    activeFileContent: state.originalContent,
    isModified: false,
    undoHistory: [],
    redoHistory: [],
  };
```

### 按钮状态
```tsx
<button 
  onClick={handleRevert}
  disabled={isLoading}  // 只在加载时禁用
  title="重置到原始状态 (Ctrl+Shift+R)"
>
```

### 键盘快捷键
```typescript
// Ctrl+Shift+R 撤销所有更改
if (e.ctrlKey && e.shiftKey && e.key === 'R') {
  e.preventDefault();
  handleRevert();
  return;
}
```

## 用户体验

- **一致性**：按钮在任何状态下都可用，避免用户困惑
- **可预测性**：无论当前状态如何，都能回到已知的起始点
- **效率**：一键操作，无需多次撤销或手动删除内容
- **安全性**：提供快速的"安全点"回退机制

这个增强确保了用户在编辑配置文件时有一个可靠的重置机制，提高了编辑的信心和效率。