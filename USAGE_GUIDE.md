# 撤销重做功能使用指南

## 快速开始

### 启动应用
1. 启动后端服务：
   ```bash
   cd backend
   go run cmd/server/main.go
   ```

2. 启动前端开发服务器：
   ```bash
   pnpm dev
   ```

3. 打开浏览器访问 `http://localhost:5173`

## 功能演示

### 1. 基本编辑和撤销
1. 从左侧边栏选择一个配置文件（如 `.bashrc`）
2. 在编辑器中进行修改
3. 使用 `Ctrl+Z` 撤销修改
4. 使用 `Ctrl+Shift+Z` 重做修改

### 2. 保存功能
1. 修改文件内容后，保存按钮会变为橙色
2. 点击保存按钮或按 `Ctrl+S` 保存到系统
3. 保存后撤销历史会被清空，以当前内容为新的基准

### 3. 撤销所有更改
1. 进行多次修改
2. 点击工具栏中的"撤销所有更改"按钮（圆形箭头图标）
3. 文件内容会恢复到打开时的状态

### 4. 状态监控
- **工具栏按钮**: 撤销/重做按钮会根据历史记录状态启用/禁用
- **状态栏显示**: 底部状态栏显示当前可撤销和可重做的操作数量
- **修改标识**: 文件名后的橙色圆点表示文件已修改

## 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+Z` | 撤销上一步操作 |
| `Ctrl+Shift+Z` | 重做操作 |
| `Ctrl+Y` | 重做操作（备选） |
| `Ctrl+S` | 保存文件到系统 |

## 注意事项

1. **历史记录限制**: 最多保存50个撤销状态
2. **文件切换**: 切换到其他文件时，当前文件的撤销历史会被清空
3. **只读文件**: 系统文件等只读文件不支持编辑和撤销功能
4. **自动保存**: 每次内容变更都会自动添加到撤销历史

## 故障排除

### 快捷键不工作
- 确保编辑器区域有焦点
- 检查是否在其他输入框中（快捷键会被智能过滤）

### 撤销按钮禁用
- 检查是否有撤销历史（状态栏显示数量）
- 确保文件不是只读状态

### 保存失败
- 检查文件权限
- 确保后端服务正在运行
- 查看浏览器控制台的错误信息